!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("rxjs"),require("@angular/common"),require("@angular/core"),require("rxjs/operators")):"function"==typeof define&&define.amd?define(["rxjs","@angular/common","@angular/core","rxjs/operators"],t):(e=e||self)["angular-draggable-droppable"]=t(e.rxjs,e.ng.common,e.ng.core,e.rxjs.operators)}(this,(function(e,t,n,r){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var i,a=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(i,a){i.exports=function(e,t,n,r){function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function a(e,t){return e(t={exports:{}},t.exports),t.exports}e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==o||"undefined"!=typeof self&&self;var s=a((function(e,t){function n(e,t){return void 0===e?void 0===t?e:t:e}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e,t){return"function"==typeof(e=n(e,t))?function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return!!e.apply(this,n)}:e?function(){return!0}:function(){return!1}},t.integer=function(e,t){return"function"==typeof(e=n(e,t))?function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=parseInt(e.apply(this,n),10);return o!=o?0:o}:(e=parseInt(e,10))!=e?function(){return 0}:function(){return e}},t.string=function(e,t){return"function"==typeof(e=n(e,t))?function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return""+e.apply(this,n)}:(e=""+e,function(){return e})}}));i(s),s.integer,s.string;var l,c,u,d,p,f,m=(l=function(e){return"function"==typeof e},c=Math.pow(2,53)-1,u=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),c)},d=function(e){if(null!=e){if(["string","number","boolean","symbol"].indexOf(typeof e)>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in e)return Symbol.iterator;if("@@iterator"in e)return"@@iterator"}},p=function(e,t){if(null!=e&&null!=t){var n=e[t];if(null==n)return;if(!l(n))throw new TypeError(n+" is not a function");return n}},f=function(e){var t=e.next();return!Boolean(t.done)&&t},function(e){var t,n,r,o=this,i=arguments.length>1?arguments[1]:void 0;if(void 0!==i){if(!l(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(t=arguments[2])}var a=p(e,d(e));if(void 0!==a){n=l(o)?Object(new o):[];var s,c,m=a.call(e);if(null==m)throw new TypeError("Array.from requires an array-like or iterable object");for(r=0;;){if(!(s=f(m)))return n.length=r,n;c=s.value,n[r]=i?i.call(t,c,r):c,r++}}else{var h=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var v,g=u(h.length);for(n=l(o)?Object(new o(g)):new Array(g),r=0;r<g;)v=h[r],n[r]=i?i.call(t,v,r):v,r++;n.length=g}return n}),h="function"==typeof Array.from?Array.from:m,v=Array.isArray,g=Object.prototype.toString,y=v||function(e){return!!e&&"[object Array]"==g.call(e)},w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function b(e){return null!=e&&"object"===(void 0===e?"undefined":w(e))&&1===e.nodeType&&"object"===w(e.style)&&"object"===w(e.ownerDocument)}var E=a((function(e,t){function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var r=n(h),o=n(y),i=n(b),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(e){return null!=e&&"object"===(void 0===e?"undefined":a(e))&&1===e.nodeType&&"object"===a(e.style)&&"object"===a(e.ownerDocument)};function l(e){if("string"==typeof e)try{return document.querySelector(e)}catch(e){throw e}else if(i(e))return e}function c(e,t){if(t=f(t,!0),!s(t))return-1;for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}function u(e,t){return-1!==c(e,t)}function d(e){if(!e)return[];try{return"string"==typeof e?r(document.querySelectorAll(e)):o(e)?e.map(f):void 0===e.length?[f(e)]:r(e,f)}catch(e){throw new Error(e)}}function p(e,t){for(var n=0;n<t.length;n++)u(e,t[n])||e.push(t[n]);return t}function f(e,t){if("string"==typeof e)try{return document.querySelector(e)}catch(e){throw e}if(!s(e)&&!t)throw new TypeError(e+" is not a DOM element.");return e}t.indexOfElement=c,t.hasElement=u,t.domListOf=d,t.concatElementLists=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return e.reduce((function(e,t){return t.length?e:e.concat(d(t))}),[])},t.addElements=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return p(e,t=t.map(f))},t.removeElements=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return t.map(f).reduce((function(t,n){var r=c(e,n);return-1!==r?t.concat(e.splice(r,1)):t}),[])},t.resolveElement=f,t.select=l,t.selectAll=function(e){return"string"==typeof e?Array.prototype.slice.apply(document.querySelectorAll(e)):o(e)?e.map(l):"length"in e?r(e).map(l):void 0}}));i(E),E.indexOfElement,E.hasElement,E.domListOf,E.concatElementLists,E.addElements,E.removeElements,E.resolveElement,E.select,E.selectAll;var S=function(e,t){t=t||{};var n=s.boolean(t.allowUpdate,!0);return function(t){if(t=t||window.event,e.target=t.target||t.srcElement||t.originalTarget,e.element=this,e.type=t.type,n(t)){if(t.targetTouches)e.x=t.targetTouches[0].clientX,e.y=t.targetTouches[0].clientY,e.pageX=t.targetTouches[0].pageX,e.pageY=t.targetTouches[0].pageY,e.screenX=t.targetTouches[0].screenX,e.screenY=t.targetTouches[0].screenY;else{if(null===t.pageX&&null!==t.clientX){var r=t.target&&t.target.ownerDocument||document,o=r.documentElement,i=r.body;e.pageX=t.clientX+(o&&o.scrollLeft||i&&i.scrollLeft||0)-(o&&o.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(o&&o.scrollTop||i&&i.scrollTop||0)-(o&&o.clientTop||i&&i.clientTop||0)}else e.pageX=t.pageX,e.pageY=t.pageY;e.x=t.clientX,e.y=t.clientY,e.screenX=t.screenX,e.screenY=t.screenY}e.clientX=e.x,e.clientY=e.y}}},x=a((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=S)&&"object"==typeof n&&"default"in n?n.default:n;function o(e){if(e===window)return function(){var e={top:{value:0,enumerable:!0},left:{value:0,enumerable:!0},right:{value:window.innerWidth,enumerable:!0},bottom:{value:window.innerHeight,enumerable:!0},width:{value:window.innerWidth,enumerable:!0},height:{value:window.innerHeight,enumerable:!0},x:{value:0,enumerable:!0},y:{value:0,enumerable:!0}};if(Object.create)return Object.create({},e);var t={};return Object.defineProperties(t,e),t}();try{var t=e.getBoundingClientRect();return void 0===t.x&&(t.x=t.left,t.y=t.top),t}catch(t){throw new TypeError("Can't call getBoundingClientRect on "+e)}}t.createPointCB=r,t.getClientRect=o,t.pointInside=function(e,t){var n=o(t);return e.y>n.top&&e.y<n.bottom&&e.x>n.left&&e.x<n.right}}));i(x),x.createPointCB,x.getClientRect,x.pointInside;var C,L=void 0;"function"!=typeof Object.create?(C=function(){},L=function(e,t){if(e!==Object(e)&&null!==e)throw TypeError("Argument must be an object, or null");C.prototype=e||{};var n=new C;return C.prototype=null,void 0!==t&&Object.defineProperties(n,t),null===e&&(n.__proto__=null),n}):L=Object.create;var O=L,D=["altKey","button","buttons","clientX","clientY","ctrlKey","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","region","relatedTarget","screenX","screenY","shiftKey","which","x","y"];function j(e,t){t=t||{};for(var n=O(e),r=0;r<D.length;r++)void 0!==t[D[r]]&&(n[D[r]]=t[D[r]]);return n}function T(e,t){console.log("data ",t),e.data=t||{},e.dispatched="mousemove"}var X,P=(X=function(e){var t={screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,button:0,buttons:1,relatedTarget:null,region:null};function n(e){for(var n=0;n<D.length;n++)t[D[n]]=e[D[n]]}return void 0!==e&&e.addEventListener("mousemove",n),{destroy:function(){e&&e.removeEventListener("mousemove",n,!1),t=null},dispatch:MouseEvent?function(e,n,r){var o=new MouseEvent("mousemove",j(t,n));return T(o,r),e.dispatchEvent(o)}:"function"==typeof document.createEvent?function(e,n,r){var o=j(t,n),i=document.createEvent("MouseEvents");return i.initMouseEvent("mousemove",!0,!0,window,0,o.screenX,o.screenY,o.clientX,o.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.button,o.relatedTarget),T(i,r),e.dispatchEvent(i)}:"function"==typeof document.createEventObject?function(e,n,r){var o=document.createEventObject(),i=j(t,n);for(var a in i)o[a]=i[a];return T(o,r),e.dispatchEvent(o)}:void 0}})&&"object"==typeof X&&"default"in X?X.default:X,Y=["webkit","moz","ms","o"],M=function(){if("undefined"==typeof window)return function(){};for(var e=0,t=Y.length;e<t&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[Y[e]+"RequestAnimationFrame"];if(!window.requestAnimationFrame){var n=0;window.requestAnimationFrame=function(e){var t=(new Date).getTime(),r=Math.max(0,16-t-n),o=window.setTimeout((function(){return e(t+r)}),r);return n=t+r,o}}return window.requestAnimationFrame.bind(window)}(),A=function(){if("undefined"==typeof window)return function(){};for(var e=0,t=Y.length;e<t&&!window.cancelAnimationFrame;++e)window.cancelAnimationFrame=window[Y[e]+"CancelAnimationFrame"]||window[Y[e]+"CancelRequestAnimationFrame"];return window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){window.clearTimeout(e)}),window.cancelAnimationFrame.bind(window)}();function R(e,t){void 0===t&&(t={});var n=this,r=4,o=!1;this.margin=t.margin||-1,this.scrollWhenOutside=t.scrollWhenOutside||!1;var i={},a=x.createPointCB(i),l=P(),c=!1;window.addEventListener("mousemove",a,!1),window.addEventListener("touchmove",a,!1),isNaN(t.maxSpeed)||(r=t.maxSpeed),this.autoScroll=s.boolean(t.autoScroll),this.syncMove=s.boolean(t.syncMove,!1),this.destroy=function(t){window.removeEventListener("mousemove",a,!1),window.removeEventListener("touchmove",a,!1),window.removeEventListener("mousedown",v,!1),window.removeEventListener("touchstart",v,!1),window.removeEventListener("mouseup",g,!1),window.removeEventListener("touchend",g,!1),window.removeEventListener("pointerup",g,!1),window.removeEventListener("mouseleave",w,!1),window.removeEventListener("mousemove",S,!1),window.removeEventListener("touchmove",S,!1),window.removeEventListener("scroll",h,!0),e=[],t&&y()},this.add=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return E.addElements.apply(void 0,[e].concat(t)),this},this.remove=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return E.removeElements.apply(void 0,[e].concat(t))};var u,d,p=null;"[object Array]"!==Object.prototype.toString.call(e)&&(e=[e]),d=e,e=[],d.forEach((function(e){e===window?p=window:n.add(e)})),Object.defineProperties(this,{down:{get:function(){return c}},maxSpeed:{get:function(){return r}},point:{get:function(){return i}},scrolling:{get:function(){return o}}});var f,m=null;function h(t){for(var n=0;n<e.length;n++)if(e[n]===t.target){o=!0;break}o&&M((function(){return o=!1}))}function v(){c=!0}function g(){c=!1,y()}function y(){A(f),A(u)}function w(){c=!1}function b(){for(var t=null,n=0;n<e.length;n++)I(i,e[n])&&(t=e[n]);return t}function S(t){if(n.autoScroll()&&!t.dispatched){var r=t.target,o=document.body;m&&!I(i,m)&&(n.scrollWhenOutside||(m=null)),r&&r.parentNode===o?r=b():(r=function(t){if(!t)return null;if(m===t)return t;if(E.hasElement(e,t))return t;for(;t=t.parentNode;)if(E.hasElement(e,t))return t;return null}(r))||(r=b()),r&&r!==m&&(m=r),p&&(A(u),u=M(C)),m&&(A(f),f=M(L))}}function C(){O(p),A(u),u=M(C)}function L(){m&&(O(m),A(f),f=M(L))}function O(e){var t,r,o=x.getClientRect(e);t=i.x<o.left+n.margin?Math.floor(Math.max(-1,(i.x-o.left)/n.margin-1)*n.maxSpeed):i.x>o.right-n.margin?Math.ceil(Math.min(1,(i.x-o.right)/n.margin+1)*n.maxSpeed):0,r=i.y<o.top+n.margin?Math.floor(Math.max(-1,(i.y-o.top)/n.margin-1)*n.maxSpeed):i.y>o.bottom-n.margin?Math.ceil(Math.min(1,(i.y-o.bottom)/n.margin+1)*n.maxSpeed):0,n.syncMove()&&l.dispatch(e,{pageX:i.pageX+t,pageY:i.pageY+r,clientX:i.x+t,clientY:i.y+r}),setTimeout((function(){r&&function(e,t){e===window?window.scrollTo(e.pageXOffset,e.pageYOffset+t):e.scrollTop+=t}(e,r),t&&function(e,t){e===window?window.scrollTo(e.pageXOffset+t,e.pageYOffset):e.scrollLeft+=t}(e,t)}))}window.addEventListener("mousedown",v,!1),window.addEventListener("touchstart",v,!1),window.addEventListener("mouseup",g,!1),window.addEventListener("touchend",g,!1),window.addEventListener("pointerup",g,!1),window.addEventListener("mousemove",S,!1),window.addEventListener("touchmove",S,!1),window.addEventListener("mouseleave",w,!1),window.addEventListener("scroll",h,!0)}function I(e,t,n){return n?e.y>n.top&&e.y<n.bottom&&e.x>n.left&&e.x<n.right:x.pointInside(e,t)}var $=function(e,t){return new R(e,t)};return i(a((function(o,i){!function(e,t,n,r,o,i){r=r&&r.hasOwnProperty("default")?r.default:r;
/*! *****************************************************************************
		    Copyright (c) Microsoft Corporation. All rights reserved.
		    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
		    this file except in compliance with the License. You may obtain a copy of the
		    License at http://www.apache.org/licenses/LICENSE-2.0

		    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
		    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
		    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
		    MERCHANTABLITY OR NON-INFRINGEMENT.

		    See the Apache Version 2.0 License for specific language governing permissions
		    and limitations under the License.
		    ***************************************************************************** */
var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}var l=function(){function e(){this.currentDrag=new t.Subject}return e.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=o.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),c=function(){function e(e){this.elementRef=e,this.activeLongPressDrag=!1,this.longPressConfig={duration:300,delta:30}}return e.decorators=[{type:o.Directive,args:[{selector:"[mwlDraggableScrollContainer]"}]}],e.ctorParameters=function(){return[{type:o.ElementRef}]},e.propDecorators={activeLongPressDrag:[{type:o.Input}],longPressConfig:[{type:o.Input}]},e}();function u(e,t,n){n&&n.split(" ").forEach((function(n){return e.addClass(t.nativeElement,n)}))}function d(e,t,n){n&&n.split(" ").forEach((function(n){return e.removeClass(t.nativeElement,n)}))}var p=function(){function e(e,n,r,i,a,s,l){this.element=e,this.renderer=n,this.draggableHelper=r,this.zone=i,this.vcr=a,this.scrollContainer=s,this.document=l,this.dragAxis={x:!0,y:!0},this.dragSnapGrid={},this.ghostDragEnabled=!0,this.showOriginalElementWhileDragging=!1,this.dragCursor="",this.dragPointerDown=new o.EventEmitter,this.dragStart=new o.EventEmitter,this.ghostElementCreated=new o.EventEmitter,this.dragging=new o.EventEmitter,this.dragEnd=new o.EventEmitter,this.pointerDown$=new t.Subject,this.pointerMove$=new t.Subject,this.pointerUp$=new t.Subject,this.eventListenerSubscriptions={},this.destroy$=new t.Subject,this.timeLongPress={timerBegin:0,timerEnd:0}}return e.prototype.ngOnInit=function(){var e=this;this.checkEventListeners();var n=this.pointerDown$.pipe(i.filter((function(){return e.canDrag()})),i.mergeMap((function(n){n.event.stopPropagation&&!e.scrollContainer&&n.event.stopPropagation();var o=e.renderer.createElement("style");e.renderer.setAttribute(o,"type","text/css"),e.renderer.appendChild(o,e.renderer.createText("\n          body * {\n           -moz-user-select: none;\n           -ms-user-select: none;\n           -webkit-user-select: none;\n           user-select: none;\n          }\n        ")),e.document.head.appendChild(o);var l=e.getScrollPosition(),c=new t.Observable((function(t){var n=e.scrollContainer?e.scrollContainer.elementRef.nativeElement:"window";return e.renderer.listen(n,"scroll",(function(e){return t.next(e)}))})).pipe(i.startWith(l),i.map((function(){return e.getScrollPosition()}))),p=new t.Subject,f=new t.ReplaySubject;e.zone.run((function(){e.dragPointerDown.next({x:0,y:0})}));var m=t.merge(e.pointerUp$,e.pointerDown$,f,e.destroy$).pipe(i.share()),h=t.combineLatest([e.pointerMove$,c]).pipe(i.map((function(e){var t=s(e,2),r=t[0],o=t[1];return{currentDrag$:p,transformX:r.clientX-n.clientX,transformY:r.clientY-n.clientY,clientX:r.clientX,clientY:r.clientY,scrollLeft:o.left,scrollTop:o.top}})),i.map((function(t){return e.dragSnapGrid.x&&(t.transformX=Math.round(t.transformX/e.dragSnapGrid.x)*e.dragSnapGrid.x),e.dragSnapGrid.y&&(t.transformY=Math.round(t.transformY/e.dragSnapGrid.y)*e.dragSnapGrid.y),t})),i.map((function(t){return e.dragAxis.x||(t.transformX=0),e.dragAxis.y||(t.transformY=0),t})),i.map((function(e){var t=e.scrollLeft-l.left,n=e.scrollTop-l.top;return a({},e,{x:e.transformX+t,y:e.transformY+n})})),i.filter((function(t){var n=t.x,r=t.y,o=t.transformX,i=t.transformY;return!e.validateDrag||e.validateDrag({x:n,y:r,transform:{x:o,y:i}})})),i.takeUntil(m),i.share()),v=h.pipe(i.take(1),i.share()),g=h.pipe(i.takeLast(1),i.share());return v.subscribe((function(t){var n=t.clientX,o=t.clientY,i=t.x,a=t.y;if(e.zone.run((function(){e.dragStart.next({cancelDrag$:f})})),e.scroller=r([e.scrollContainer?e.scrollContainer.elementRef.nativeElement:e.document.defaultView],{margin:20,autoScroll:function(){return!0}}),u(e.renderer,e.element,e.dragActiveClass),e.ghostDragEnabled){var s=e.element.nativeElement.getBoundingClientRect(),l=e.element.nativeElement.cloneNode(!0);if(e.showOriginalElementWhileDragging||e.renderer.setStyle(e.element.nativeElement,"visibility","hidden"),e.ghostElementAppendTo?e.ghostElementAppendTo.appendChild(l):e.element.nativeElement.parentNode.insertBefore(l,e.element.nativeElement.nextSibling),e.ghostElement=l,e.document.body.style.cursor=e.dragCursor,e.setElementStyles(l,{position:"fixed",top:s.top+"px",left:s.left+"px",width:s.width+"px",height:s.height+"px",cursor:e.dragCursor,margin:"0",willChange:"transform",pointerEvents:"none"}),e.ghostElementTemplate){var c=e.vcr.createEmbeddedView(e.ghostElementTemplate);l.innerHTML="",c.rootNodes.filter((function(e){return e instanceof Node})).forEach((function(e){l.appendChild(e)})),g.subscribe((function(){e.vcr.remove(e.vcr.indexOf(c))}))}e.zone.run((function(){e.ghostElementCreated.emit({clientX:n-i,clientY:o-a,element:l})})),g.subscribe((function(){l.parentElement.removeChild(l),e.ghostElement=null,e.renderer.setStyle(e.element.nativeElement,"visibility","")}))}e.draggableHelper.currentDrag.next(p)})),g.pipe(i.mergeMap((function(e){var t=f.pipe(i.count(),i.take(1),i.map((function(t){return a({},e,{dragCancelled:t>0})})));return f.complete(),t}))).subscribe((function(t){var n=t.x,r=t.y,o=t.dragCancelled;e.scroller.destroy(),e.zone.run((function(){e.dragEnd.next({x:n,y:r,dragCancelled:o})})),d(e.renderer,e.element,e.dragActiveClass),p.complete()})),t.merge(m,g).pipe(i.take(1)).subscribe((function(){e.document.head.removeChild(o)})),h})),i.share());t.merge(n.pipe(i.take(1),i.map((function(e){return[,e]}))),n.pipe(i.pairwise())).pipe(i.filter((function(e){var t=s(e,2),n=t[0],r=t[1];return!n||n.x!==r.x||n.y!==r.y})),i.map((function(e){var t=s(e,2);return t[0],t[1]})),i.auditTime(0,t.animationFrameScheduler)).subscribe((function(t){var n=t.x,r=t.y,o=t.currentDrag$,i=t.clientX,a=t.clientY,s=t.transformX,l=t.transformY;if(e.zone.run((function(){e.dragging.next({x:n,y:r})})),e.ghostElement){var c="translate3d("+s+"px, "+l+"px, 0px)";e.setElementStyles(e.ghostElement,{transform:c,"-webkit-transform":c,"-ms-transform":c,"-moz-transform":c,"-o-transform":c})}o.next({clientX:i,clientY:a,dropData:e.dropData})}))},e.prototype.ngOnChanges=function(e){e.dragAxis&&this.checkEventListeners()},e.prototype.ngOnDestroy=function(){this.unsubscribeEventListeners(),this.pointerDown$.complete(),this.pointerMove$.complete(),this.pointerUp$.complete(),this.destroy$.next()},e.prototype.checkEventListeners=function(){var e=this,t=this.canDrag(),n=Object.keys(this.eventListenerSubscriptions).length>0;t&&!n?this.zone.runOutsideAngular((function(){e.eventListenerSubscriptions.mousedown=e.renderer.listen(e.element.nativeElement,"mousedown",(function(t){e.onMouseDown(t)})),e.eventListenerSubscriptions.mouseup=e.renderer.listen("document","mouseup",(function(t){e.onMouseUp(t)})),e.eventListenerSubscriptions.touchstart=e.renderer.listen(e.element.nativeElement,"touchstart",(function(t){e.onTouchStart(t)})),e.eventListenerSubscriptions.touchend=e.renderer.listen("document","touchend",(function(t){e.onTouchEnd(t)})),e.eventListenerSubscriptions.touchcancel=e.renderer.listen("document","touchcancel",(function(t){e.onTouchEnd(t)})),e.eventListenerSubscriptions.mouseenter=e.renderer.listen(e.element.nativeElement,"mouseenter",(function(){e.onMouseEnter()})),e.eventListenerSubscriptions.mouseleave=e.renderer.listen(e.element.nativeElement,"mouseleave",(function(){e.onMouseLeave()}))})):!t&&n&&this.unsubscribeEventListeners()},e.prototype.onMouseDown=function(e){var t=this;0===e.button&&(this.eventListenerSubscriptions.mousemove||(this.eventListenerSubscriptions.mousemove=this.renderer.listen("document","mousemove",(function(e){t.pointerMove$.next({event:e,clientX:e.clientX,clientY:e.clientY})}))),this.pointerDown$.next({event:e,clientX:e.clientX,clientY:e.clientY}))},e.prototype.onMouseUp=function(e){0===e.button&&(this.eventListenerSubscriptions.mousemove&&(this.eventListenerSubscriptions.mousemove(),delete this.eventListenerSubscriptions.mousemove),this.pointerUp$.next({event:e,clientX:e.clientX,clientY:e.clientY}))},e.prototype.onTouchStart=function(e){var n,r,o,i=this;if((this.scrollContainer&&this.scrollContainer.activeLongPressDrag||this.touchStartLongPress)&&(this.timeLongPress.timerBegin=Date.now(),r=!1,o=this.hasScrollbar(),n=this.getScrollPosition()),!this.eventListenerSubscriptions.touchmove){var a=t.fromEvent(this.document,"contextmenu").subscribe((function(e){e.preventDefault()})),s=t.fromEvent(this.document,"touchmove",{passive:!1}).subscribe((function(t){(i.scrollContainer&&i.scrollContainer.activeLongPressDrag||i.touchStartLongPress)&&!r&&o&&(r=i.shouldBeginDrag(e,t,n)),(i.scrollContainer&&i.scrollContainer.activeLongPressDrag||i.touchStartLongPress)&&o&&!r||(t.preventDefault(),i.pointerMove$.next({event:t,clientX:t.targetTouches[0].clientX,clientY:t.targetTouches[0].clientY}))}));this.eventListenerSubscriptions.touchmove=function(){a.unsubscribe(),s.unsubscribe()}}this.pointerDown$.next({event:e,clientX:e.touches[0].clientX,clientY:e.touches[0].clientY})},e.prototype.onTouchEnd=function(e){this.eventListenerSubscriptions.touchmove&&(this.eventListenerSubscriptions.touchmove(),delete this.eventListenerSubscriptions.touchmove,(this.scrollContainer&&this.scrollContainer.activeLongPressDrag||this.touchStartLongPress)&&this.enableScroll()),this.pointerUp$.next({event:e,clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY})},e.prototype.onMouseEnter=function(){this.setCursor(this.dragCursor)},e.prototype.onMouseLeave=function(){this.setCursor("")},e.prototype.canDrag=function(){return this.dragAxis.x||this.dragAxis.y},e.prototype.setCursor=function(e){this.eventListenerSubscriptions.mousemove||this.renderer.setStyle(this.element.nativeElement,"cursor",e)},e.prototype.unsubscribeEventListeners=function(){var e=this;Object.keys(this.eventListenerSubscriptions).forEach((function(t){e.eventListenerSubscriptions[t](),delete e.eventListenerSubscriptions[t]}))},e.prototype.setElementStyles=function(e,t){var n=this;Object.keys(t).forEach((function(r){n.renderer.setStyle(e,r,t[r])}))},e.prototype.getScrollElement=function(){return this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.body},e.prototype.getScrollPosition=function(){return this.scrollContainer?{top:this.scrollContainer.elementRef.nativeElement.scrollTop,left:this.scrollContainer.elementRef.nativeElement.scrollLeft}:{top:window.pageYOffset||this.document.documentElement.scrollTop,left:window.pageXOffset||this.document.documentElement.scrollLeft}},e.prototype.shouldBeginDrag=function(e,t,n){var r=this.getScrollPosition(),o=Math.abs(r.top-n.top),i=Math.abs(r.left-n.left),a=Math.abs(t.targetTouches[0].clientX-e.touches[0].clientX)-i+(Math.abs(t.targetTouches[0].clientY-e.touches[0].clientY)-o),s=this.touchStartLongPress?this.touchStartLongPress:{delta:this.scrollContainer.longPressConfig.delta,delay:this.scrollContainer.longPressConfig.duration};return(a>s.delta||o>0||i>0)&&(this.timeLongPress.timerBegin=Date.now()),this.timeLongPress.timerEnd=Date.now(),this.timeLongPress.timerEnd-this.timeLongPress.timerBegin>=s.delay&&(this.disableScroll(),!0)},e.prototype.enableScroll=function(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow",""),this.renderer.setStyle(this.document.body,"overflow","")},e.prototype.disableScroll=function(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow","hidden"),this.renderer.setStyle(this.document.body,"overflow","hidden")},e.prototype.hasScrollbar=function(){var e=this.getScrollElement(),t=e.scrollWidth>e.clientWidth,n=e.scrollHeight>e.clientHeight;return t||n},e.decorators=[{type:o.Directive,args:[{selector:"[mwlDraggable]"}]}],e.ctorParameters=function(){return[{type:o.ElementRef},{type:o.Renderer2},{type:l},{type:o.NgZone},{type:o.ViewContainerRef},{type:c,decorators:[{type:o.Optional}]},{type:void 0,decorators:[{type:o.Inject,args:[n.DOCUMENT]}]}]},e.propDecorators={dropData:[{type:o.Input}],dragAxis:[{type:o.Input}],dragSnapGrid:[{type:o.Input}],ghostDragEnabled:[{type:o.Input}],showOriginalElementWhileDragging:[{type:o.Input}],validateDrag:[{type:o.Input}],dragCursor:[{type:o.Input}],dragActiveClass:[{type:o.Input}],ghostElementAppendTo:[{type:o.Input}],ghostElementTemplate:[{type:o.Input}],touchStartLongPress:[{type:o.Input}],dragPointerDown:[{type:o.Output}],dragStart:[{type:o.Output}],ghostElementCreated:[{type:o.Output}],dragging:[{type:o.Output}],dragEnd:[{type:o.Output}]},e}();function f(e,t,n){return e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom}var m=function(){function e(e,t,n,r,i){this.element=e,this.draggableHelper=t,this.zone=n,this.renderer=r,this.scrollContainer=i,this.dragEnter=new o.EventEmitter,this.dragLeave=new o.EventEmitter,this.dragOver=new o.EventEmitter,this.drop=new o.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;this.currentDragSubscription=this.draggableHelper.currentDrag.subscribe((function(t){u(e.renderer,e.element,e.dragActiveClass);var n,r,o={updateCache:!0},a=e.renderer.listen(e.scrollContainer?e.scrollContainer.elementRef.nativeElement:"window","scroll",(function(){o.updateCache=!0})),l=t.pipe(i.map((function(t){var r=t.clientX,i=t.clientY,a=t.dropData;n=a,o.updateCache&&(o.rect=e.element.nativeElement.getBoundingClientRect(),e.scrollContainer&&(o.scrollContainerRect=e.scrollContainer.elementRef.nativeElement.getBoundingClientRect()),o.updateCache=!1);var s=f(r,i,o.rect);return o.scrollContainerRect?s&&f(r,i,o.scrollContainerRect):s}))),c=l.pipe(i.distinctUntilChanged());c.pipe(i.filter((function(e){return e}))).subscribe((function(){r=!0,u(e.renderer,e.element,e.dragOverClass),e.zone.run((function(){e.dragEnter.next({dropData:n})}))})),l.pipe(i.filter((function(e){return e}))).subscribe((function(){e.zone.run((function(){e.dragOver.next({dropData:n})}))})),c.pipe(i.pairwise(),i.filter((function(e){var t=s(e,2),n=t[0],r=t[1];return n&&!r}))).subscribe((function(){r=!1,d(e.renderer,e.element,e.dragOverClass),e.zone.run((function(){e.dragLeave.next({dropData:n})}))})),t.subscribe({complete:function(){a(),d(e.renderer,e.element,e.dragActiveClass),r&&(d(e.renderer,e.element,e.dragOverClass),e.zone.run((function(){e.drop.next({dropData:n})})))}})}))},e.prototype.ngOnDestroy=function(){this.currentDragSubscription&&this.currentDragSubscription.unsubscribe()},e.decorators=[{type:o.Directive,args:[{selector:"[mwlDroppable]"}]}],e.ctorParameters=function(){return[{type:o.ElementRef},{type:l},{type:o.NgZone},{type:o.Renderer2},{type:c,decorators:[{type:o.Optional}]}]},e.propDecorators={dragOverClass:[{type:o.Input}],dragActiveClass:[{type:o.Input}],dragEnter:[{type:o.Output}],dragLeave:[{type:o.Output}],dragOver:[{type:o.Output}],drop:[{type:o.Output}]},e}(),h=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{declarations:[p,m,c],exports:[p,m,c]}]}],e}();e.DragAndDropModule=h,e.ɵc=l,e.ɵd=c,e.ɵb=p,e.ɵa=m,Object.defineProperty(e,"__esModule",{value:!0})}(i,e,t,$,n,r)})))}(e,t,n,r)}));return(i=a)&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}));
//# sourceMappingURL=angular-draggable-droppable.umd.min.js.map
